(()=>{"use strict";var e,t,s={232:e=>{var t,s=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,u=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,h=(e,t)=>{for(var s in t||(t={}))o.call(t,s)&&u(e,s,t[s]);if(n)for(var s of n(t))a.call(t,s)&&u(e,s,t[s]);return e},l=(e,t,s)=>new Promise(((r,i)=>{var n=e=>{try{a(s.next(e))}catch(e){i(e)}},o=e=>{try{a(s.throw(e))}catch(e){i(e)}},a=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);a((s=s.apply(e,t)).next())})),d={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(d,{Client:()=>le,DefaultSocket:()=>he,Session:()=>re,WebSocketAdapterText:()=>ae}),e.exports=(t=d,((e,t,n,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))o.call(e,n)||undefined===n||s(e,n,{get:()=>t[n],enumerable:!(a=r(t,n))||a.enumerable});return e})(s({},"__esModule",{value:!0}),t));var c,f,p="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==p&&p,m={searchParams:"URLSearchParams"in p,iterable:"Symbol"in p&&"iterator"in Symbol,blob:"FileReader"in p&&"Blob"in p&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in p,arrayBuffer:"ArrayBuffer"in p};function w(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function b(e){return"string"!=typeof e&&(e=String(e)),e}function _(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function y(e){this.map={},e instanceof y?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function P(e){return new Promise((function(t,s){e.onload=function(){t(e.result)},e.onerror=function(){s(e.error)}}))}function v(e){var t=new FileReader,s=P(t);return t.readAsArrayBuffer(e),s}function k(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:m.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:m.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():m.arrayBuffer&&m.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=k(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):m.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||f(e))?this._bodyArrayBuffer=k(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(v)}),this.text=function(){var e,t,s,r=g(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,s=P(t=new FileReader),t.readAsText(e),s;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),s=new Array(t.length),r=0;r<t.length;r++)s[r]=String.fromCharCode(t[r]);return s.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(M)}),this.json=function(){return this.text().then(JSON.parse)},this}m.arrayBuffer&&(c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],f=ArrayBuffer.isView||function(e){return e&&c.indexOf(Object.prototype.toString.call(e))>-1}),y.prototype.append=function(e,t){e=w(e),t=b(t);var s=this.map[e];this.map[e]=s?s+", "+t:t},y.prototype.delete=function(e){delete this.map[w(e)]},y.prototype.get=function(e){return e=w(e),this.has(e)?this.map[e]:null},y.prototype.has=function(e){return this.map.hasOwnProperty(w(e))},y.prototype.set=function(e,t){this.map[w(e)]=b(t)},y.prototype.forEach=function(e,t){for(var s in this.map)this.map.hasOwnProperty(s)&&e.call(t,this.map[s],s,this)},y.prototype.keys=function(){var e=[];return this.forEach((function(t,s){e.push(s)})),_(e)},y.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),_(e)},y.prototype.entries=function(){var e=[];return this.forEach((function(t,s){e.push([s,t])})),_(e)},m.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);var R=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function S(e,t){if(!(this instanceof S))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var s,r,i=(t=t||{}).body;if(e instanceof S){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new y(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new y(t.headers)),this.method=(r=(s=t.method||this.method||"GET").toUpperCase(),R.indexOf(r)>-1?r:s),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var n=/([?&])_=[^&]*/;n.test(this.url)?this.url=this.url.replace(n,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function M(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var s=e.split("="),r=s.shift().replace(/\+/g," "),i=s.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}})),t}function C(e,t){if(!(this instanceof C))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new y(t.headers),this.url=t.url||"",this._initBody(e)}S.prototype.clone=function(){return new S(this,{body:this._bodyInit})},T.call(S.prototype),T.call(C.prototype),C.prototype.clone=function(){return new C(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},C.error=function(){var e=new C(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];C.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new C(null,{status:t,headers:{location:e}})};var U=p.DOMException;try{new U}catch(e){(U=function(e,t){this.message=e,this.name=t;var s=Error(e);this.stack=s.stack}).prototype=Object.create(Error.prototype),U.prototype.constructor=U}function E(e,t){return new Promise((function(s,r){var i=new S(e,t);if(i.signal&&i.signal.aborted)return r(new U("Aborted","AbortError"));var n=new XMLHttpRequest;function o(){n.abort()}n.onload=function(){var e,t,r={status:n.status,statusText:n.statusText,headers:(e=n.getAllResponseHeaders()||"",t=new y,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var s=e.split(":"),r=s.shift().trim();if(r){var i=s.join(":").trim();t.append(r,i)}})),t)};r.url="responseURL"in n?n.responseURL:r.headers.get("X-Request-URL");var i="response"in n?n.response:n.responseText;setTimeout((function(){s(new C(i,r))}),0)},n.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},n.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},n.onabort=function(){setTimeout((function(){r(new U("Aborted","AbortError"))}),0)},n.open(i.method,function(e){try{return""===e&&p.location.href?p.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?n.withCredentials=!0:"omit"===i.credentials&&(n.withCredentials=!1),"responseType"in n&&(m.blob?n.responseType="blob":m.arrayBuffer&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(n.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof y?i.headers.forEach((function(e,t){n.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){n.setRequestHeader(e,b(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",o),n.onreadystatechange=function(){4===n.readyState&&i.signal.removeEventListener("abort",o)}),n.send(void 0===i._bodyInit?null:i._bodyInit)}))}E.polyfill=!0,p.fetch||(p.fetch=E,p.Headers=y,p.Request=S,p.Response=C);var A="function"==typeof atob,O="function"==typeof btoa,q="function"==typeof Buffer,j="function"==typeof TextDecoder?new TextDecoder:void 0,D="function"==typeof TextEncoder?new TextEncoder:void 0,I=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),F=(e=>{let t={};return e.forEach(((e,s)=>t[e]=s)),t})(I),B=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,z=String.fromCharCode.bind(String),N="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),G=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),J=O?e=>btoa(e):q?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,s,r,i,n="";const o=e.length%3;for(let o=0;o<e.length;){if((s=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255||(i=e.charCodeAt(o++))>255)throw new TypeError("invalid character found");t=s<<16|r<<8|i,n+=I[t>>18&63]+I[t>>12&63]+I[t>>6&63]+I[63&t]}return o?n.slice(0,o-3)+"===".substring(o):n},L=q?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let s=0,r=e.length;s<r;s+=4096)t.push(z.apply(null,e.subarray(s,s+4096)));return J(t.join(""))},H=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?z(192|t>>>6)+z(128|63&t):z(224|t>>>12&15)+z(128|t>>>6&63)+z(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return z(240|t>>>18&7)+z(128|t>>>12&63)+z(128|t>>>6&63)+z(128|63&t)},$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,X=q?e=>Buffer.from(e,"utf8").toString("base64"):D?e=>L(D.encode(e)):e=>J(e.replace($,H)),Z=(e,t=!1)=>t?(e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")))(X(e)):X(e),V=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,W=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return z(55296+(t>>>10))+z(56320+(1023&t));case 3:return z((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return z((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},K=A?e=>atob(G(e)):q?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!B.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,s,r,i="";for(let n=0;n<e.length;)t=F[e.charAt(n++)]<<18|F[e.charAt(n++)]<<12|(s=F[e.charAt(n++)])<<6|(r=F[e.charAt(n++)]),i+=64===s?z(t>>16&255):64===r?z(t>>16&255,t>>8&255):z(t>>16&255,t>>8&255,255&t);return i},Y=q?e=>N(Buffer.from(e,"base64")):e=>N(K(e),(e=>e.charCodeAt(0))),Q=q?e=>Buffer.from(e,"base64").toString("utf8"):j?e=>j.decode(Y(e)):e=>K(e).replace(V,W),ee=e=>Q(G(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))));function te(e,t,s){const r=h(h({},{method:e}),t);if(r.headers=h({},t.headers),"undefined"!=typeof XMLHttpRequest){const e=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");(null==e?void 0:e.set)||(r.credentials="cocos-ignore")}return Object.keys(r.headers).includes("Accept")||(r.headers.Accept="application/json"),Object.keys(r.headers).includes("Content-Type")||(r.headers["Content-Type"]="application/json"),Object.keys(r.headers).forEach((e=>{r.headers[e]||delete r.headers[e]})),s&&(r.body=s),r}var se,re=class e{constructor(e,t,s){this.created=s,this.token=e,this.refresh_token=t,this.created_at=Math.floor((new Date).getTime()/1e3),this.update(e,t)}isexpired(e){return this.expires_at-e<0}isrefreshexpired(e){return this.refresh_expires_at-e<0}update(e,t){const s=e.split(".");if(3!=s.length)throw"jwt is not valid.";const r=JSON.parse(K(s[1])),i=Math.floor(parseInt(r.exp));if(t){const e=t.split(".");if(3!=e.length)throw"refresh jwt is not valid.";const s=JSON.parse(K(e[1])),r=Math.floor(parseInt(s.exp));this.refresh_expires_at=r,this.refresh_token=t}this.token=e,this.expires_at=i,this.username=r.usn,this.user_id=r.uid,this.vars=r.vrs}static restore(t,s){return new e(t,s,!1)}},ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ne="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(se=0;se<ie.length;se++)ne[ie.charCodeAt(se)]=se;var oe=function(e){var t,s,r,i,n,o=.75*e.length,a=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var h=new ArrayBuffer(o),l=new Uint8Array(h);for(t=0;t<a;t+=4)s=ne[e.charCodeAt(t)],r=ne[e.charCodeAt(t+1)],i=ne[e.charCodeAt(t+2)],n=ne[e.charCodeAt(t+3)],l[u++]=s<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&n;return h},ae=class{get onClose(){return this._socket.onclose}set onClose(e){this._socket.onclose=e}get onError(){return this._socket.onerror}set onError(e){this._socket.onerror=e}get onMessage(){return this._socket.onmessage}set onMessage(e){e?this._socket.onmessage=t=>{const s=JSON.parse(t.data);s.match_data&&s.match_data.data?s.match_data.data=new Uint8Array(oe(s.match_data.data)):s.party_data&&s.party_data.data&&(s.party_data.data=new Uint8Array(oe(s.party_data.data))),e(s)}:e=null}get onOpen(){return this._socket.onopen}set onOpen(e){this._socket.onopen=e}isOpen(){var e;return(null==(e=this._socket)?void 0:e.readyState)==WebSocket.OPEN}connect(e,t,s,r,i){const n=`${e}${t}:${s}/ws?lang=en&status=${encodeURIComponent(r.toString())}&token=${encodeURIComponent(i)}`;this._socket=new WebSocket(n)}close(){this._socket.close(),this._socket=void 0}send(e){if(e.party_data_send){e.party_data_send.op_code=e.party_data_send.op_code.toString();let t=e.party_data_send.data;t&&t instanceof Uint8Array?e.party_data_send.data=function(e){var t,s=new Uint8Array(e),r=s.length,i="";for(t=0;t<r;t+=3)i+=ie[s[t]>>2],i+=ie[(3&s[t])<<4|s[t+1]>>4],i+=ie[(15&s[t+1])<<2|s[t+2]>>6],i+=ie[63&s[t+2]];return r%3==2?i=i.substring(0,i.length-1)+"=":r%3==1&&(i=i.substring(0,i.length-2)+"=="),i}(t.buffer):t&&(e.party_data_send.data=J(t))}this._socket.send(JSON.stringify(e))}},ue=class e{constructor(t,s,r=!1,i=!1,n=new ae,o=e.DefaultSendTimeoutMs){this.host=t,this.port=s,this.useSSL=r,this.verbose=i,this.adapter=n,this.sendTimeoutMs=o,this.cIds={},this.nextCid=1,this._heartbeatTimeoutMs=e.DefaultHeartbeatTimeoutMs}generatecid(){const e=this.nextCid.toString();return++this.nextCid,e}connect(t,s=!1,r=e.DefaultConnectTimeoutMs){if(this.adapter.isOpen())return Promise.resolve(t);const i=this.useSSL?"wss://":"ws://";return this.adapter.connect(i,this.host,this.port,s,t.token),this.adapter.onClose=e=>{this.ondisconnect(e)},this.adapter.onError=e=>{this.onerror(e)},this.adapter.onMessage=e=>{if(this.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(e)),e.cid){const t=this.cIds[e.cid];if(!t)return void(this.verbose&&window&&window.console&&console.error("No promise executor for message: %o",e));delete this.cIds[e.cid],e.error?t.reject(e.error):t.resolve(e)}else e.notifications?e.notifications.notifications.forEach((e=>{e.content=e.content?JSON.parse(e.content):void 0,this.onnotification(e)})):e.status_presence_event?this.onstatuspresence(e.status_presence_event):e.stream_presence_event?this.onstreampresence(e.stream_presence_event):e.stream_data?this.onstreamdata(e.stream_data):e.channel_message?(e.channel_message.content=JSON.parse(e.channel_message.content),this.onchannelmessage(e.channel_message)):e.message_typing_event?this.onmessagetyping(e):e.channel_presence_event?this.onchannelpresence(e.channel_presence_event):e.party_data?(e.party_data.op_code=parseInt(e.party_data.op_code),this.onpartydata(e.party_data)):e.party_close?this.onpartyclose(e.party_close):e.party_join_request?this.onpartyjoinrequest(e.party_join_request):e.party_leader?this.onpartyleader(e.party_leader):e.party_matchmaker_ticket?this.onpartymatchmakerticket(e.party_matchmaker_ticket):e.party_presence_event?this.onpartypresence(e.party_presence_event):e.party?this.onparty(e.party):this.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",e)},new Promise(((e,s)=>{this.adapter.onOpen=s=>{this.verbose&&window&&window.console&&console.log(s),this.pingPong(),e(t)},this.adapter.onError=e=>{s(e),this.adapter.close()},setTimeout((()=>{s("The socket timed out when trying to connect.")}),r)}))}disconnect(e=!0){this.adapter.isOpen()&&this.adapter.close(),e&&this.ondisconnect({})}setHeartbeatTimeoutMs(e){this._heartbeatTimeoutMs=e}getHeartbeatTimeoutMs(){return this._heartbeatTimeoutMs}ondisconnect(e){this.verbose&&window&&window.console&&console.log(e)}onerror(e){this.verbose&&window&&window.console&&console.log(e)}onmessagetyping(e){this.verbose&&window&&window.console&&console.log(e)}onchannelmessage(e){this.verbose&&window&&window.console&&console.log(e)}onchannelpresence(e){this.verbose&&window&&window.console&&console.log(e)}onnotification(e){this.verbose&&window&&window.console&&console.log(e)}onparty(e){this.verbose&&window&&window.console&&console.log(e)}onpartyclose(e){this.verbose&&window&&window.console&&console.log("Party closed: "+e)}onpartyjoinrequest(e){this.verbose&&window&&window.console&&console.log(e)}onpartydata(e){this.verbose&&window&&window.console&&console.log(e)}onpartyleader(e){this.verbose&&window&&window.console&&console.log(e)}onpartymatchmakerticket(e){this.verbose&&window&&window.console&&console.log(e)}onpartypresence(e){this.verbose&&window&&window.console&&console.log(e)}onstatuspresence(e){this.verbose&&window&&window.console&&console.log(e)}onstreampresence(e){this.verbose&&window&&window.console&&console.log(e)}onstreamdata(e){this.verbose&&window&&window.console&&console.log(e)}onheartbeattimeout(){this.verbose&&window&&window.console&&console.log("Heartbeat timeout.")}send(t,s=e.DefaultSendTimeoutMs){const r=t;return new Promise(((e,t)=>{if(this.adapter.isOpen())if(r.party_data_send)this.adapter.send(r),e();else{r.channel_message_send?r.channel_message_send.content=JSON.stringify(r.channel_message_send.content):r.channel_message_update&&(r.channel_message_update.content=JSON.stringify(r.channel_message_update.content));const i=this.generatecid();this.cIds[i]={resolve:e,reject:t},setTimeout((()=>{t("The socket timed out while waiting for a response.")}),s),r.cid=i,this.adapter.send(r)}else t("Socket connection has not been established yet.");if(this.verbose&&window&&window.console){const e=h({},r);e.match_data_send&&e.match_data_send.data?e.match_data_send.data=ee(e.match_data_send.data):e.party_data_send&&e.party_data_send.data&&(e.party_data_send.data=ee(e.party_data_send.data)),console.log("Sent message: %o",JSON.stringify(e))}}))}acceptPartyMember(e,t){return this.send({party_accept:{party_id:e,presence:t}})}closeParty(e){return l(this,null,(function*(){return yield this.send({party_close:{party_id:e}})}))}createParty(e,t){return l(this,null,(function*(){return(yield this.send({party_create:{open:e,max_size:t}})).party}))}followUsers(e){return l(this,null,(function*(){return(yield this.send({status_follow:{user_ids:e}})).status}))}joinChat(e,t,s,r,i){return l(this,null,(function*(){return(yield this.send({channel_join:{target_id:e,target:t,type:s,persistence:r,hidden:i}})).channel}))}joinParty(e){return l(this,null,(function*(){return yield this.send({party_join:{party_id:e}})}))}leaveChat(e){return this.send({channel_leave:{channel_id:e}})}leaveMatch(e){return this.send({match_leave:{match_id:e}})}leaveParty(e){return this.send({party_leave:{party_id:e}})}listPartyJoinRequests(e){return l(this,null,(function*(){return(yield this.send({party_join_request_list:{party_id:e}})).party_join_request}))}promotePartyMember(e,t){return l(this,null,(function*(){return(yield this.send({party_promote:{party_id:e,presence:t}})).party_leader}))}removeChatMessage(e,t){return l(this,null,(function*(){return(yield this.send({channel_message_remove:{channel_id:e,message_id:t}})).channel_message_ack}))}removePartyMember(e,t){return l(this,null,(function*(){return this.send({party_remove:{party_id:e,presence:t}})}))}rpc(e,t,s){return l(this,null,(function*(){return(yield this.send({rpc:{id:e,payload:t,http_key:s}})).rpc}))}sendPartyData(e,t,s){return this.send({party_data_send:{party_id:e,op_code:t,data:s}})}unfollowUsers(e){return this.send({status_unfollow:{user_ids:e}})}updateChatMessage(e,t,s){return l(this,null,(function*(){return(yield this.send({channel_message_update:{channel_id:e,message_id:t,content:s}})).channel_message_ack}))}updateStatus(e){return this.send({status_update:{status:e}})}writeChatMessage(e,t,s){return l(this,null,(function*(){return(yield this.send({channel_message_send:{clan_id:e,channel_id:t,content:s}})).channel_message_ack}))}writeMessageTyping(e){return l(this,null,(function*(){return(yield this.send({message_typing_event:{channel_id:e}})).message_typing_event}))}pingPong(){return l(this,null,(function*(){if(this.adapter.isOpen()){try{yield this.send({ping:{}},this._heartbeatTimeoutMs)}catch(e){return void(this.adapter.isOpen()&&(window&&window.console&&console.error("Server unreachable from heartbeat."),this.onheartbeattimeout(),this.adapter.close()))}setTimeout((()=>this.pingPong()),this._heartbeatTimeoutMs)}}))}};ue.DefaultHeartbeatTimeoutMs=1e4,ue.DefaultSendTimeoutMs=1e4,ue.DefaultConnectTimeoutMs=3e4;var he=ue,le=class{constructor(e="defaultkey",t="127.0.0.1",s="7350",r=!1,i=7e3,n=!0){this.serverkey=e,this.host=t,this.port=s,this.useSSL=r,this.timeout=i,this.autoRefreshSession=n,this.expiredTimespanMs=3e5;const o=`${r?"https://":"http://"}${t}:${s}`;this.apiClient=new class{constructor(e,t,s){this.serverKey=e,this.basePath=t,this.timeoutMs=s}healthcheck(e,t={}){const s=new Map,r=this.buildFullUrl(this.basePath,"/healthcheck",s),i=te("GET",t,"");return e&&(i.headers.Authorization="Bearer "+e),Promise.race([fetch(r,i).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteAccount(e,t={}){const s=new Map,r=this.buildFullUrl(this.basePath,"/v2/account",s),i=te("DELETE",t,"");return e&&(i.headers.Authorization="Bearer "+e),Promise.race([fetch(r,i).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}getAccount(e,t={}){const s=new Map,r=this.buildFullUrl(this.basePath,"/v2/account",s),i=te("GET",t,"");return e&&(i.headers.Authorization="Bearer "+e),Promise.race([fetch(r,i).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}updateAccount(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account",r),o=te("PUT",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateApple(e,t,s,r,i,n={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const o=new Map;o.set("create",r),o.set("username",i);let a="";a=JSON.stringify(s||{});const u=this.buildFullUrl(this.basePath,"/v2/account/authenticate/apple",o),h=te("POST",n,a);return e&&(h.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateCustom(e,t,s,r,i,n={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const o=new Map;o.set("create",r),o.set("username",i);let a="";a=JSON.stringify(s||{});const u=this.buildFullUrl(this.basePath,"/v2/account/authenticate/custom",o),h=te("POST",n,a);return e&&(h.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateDevice(e,t,s,r,i,n={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const o=new Map;o.set("create",r),o.set("username",i);let a="";a=JSON.stringify(s||{});const u=this.buildFullUrl(this.basePath,"/v2/account/authenticate/device",o),h=te("POST",n,a);return e&&(h.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateEmail(e,t,s,r,i,n={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const o=new Map;o.set("create",r),o.set("username",i);let a="";a=JSON.stringify(s||{});const u=this.buildFullUrl(this.basePath,"/v2/account/authenticate/email",o),h=te("POST",n,a);return e&&(h.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateFacebook(e,t,s,r,i,n,o={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const a=new Map;a.set("create",r),a.set("username",i),a.set("sync",n);let u="";u=JSON.stringify(s||{});const h=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebook",a),l=te("POST",o,u);return e&&(l.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(h,l).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateFacebookInstantGame(e,t,s,r,i,n={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const o=new Map;o.set("create",r),o.set("username",i);let a="";a=JSON.stringify(s||{});const u=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebookinstantgame",o),h=te("POST",n,a);return e&&(h.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateGameCenter(e,t,s,r,i,n={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const o=new Map;o.set("create",r),o.set("username",i);let a="";a=JSON.stringify(s||{});const u=this.buildFullUrl(this.basePath,"/v2/account/authenticate/gamecenter",o),h=te("POST",n,a);return e&&(h.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateGoogle(e,t,s,r,i,n={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const o=new Map;o.set("create",r),o.set("username",i);let a="";a=JSON.stringify(s||{});const u=this.buildFullUrl(this.basePath,"/v2/account/authenticate/google",o),h=te("POST",n,a);return e&&(h.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}authenticateSteam(e,t,s,r,i,n,o={}){if(null==s)throw new Error("'account' is a required parameter but is null or undefined.");const a=new Map;a.set("create",r),a.set("username",i),a.set("sync",n);let u="";u=JSON.stringify(s||{});const h=this.buildFullUrl(this.basePath,"/v2/account/authenticate/steam",a),l=te("POST",o,u);return e&&(l.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(h,l).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkApple(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/link/apple",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkCustom(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/link/custom",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkDevice(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/link/device",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkEmail(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/link/email",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkFacebook(e,t,s,r={}){if(null==t)throw new Error("'account' is a required parameter but is null or undefined.");const i=new Map;i.set("sync",s);let n="";n=JSON.stringify(t||{});const o=this.buildFullUrl(this.basePath,"/v2/account/link/facebook",i),a=te("POST",r,n);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkFacebookInstantGame(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/link/facebookinstantgame",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkGameCenter(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/link/gamecenter",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkGoogle(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/link/google",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}linkSteam(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/link/steam",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}sessionRefresh(e,t,s,r={}){if(null==s)throw new Error("'body' is a required parameter but is null or undefined.");const i=new Map;let n="";n=JSON.stringify(s||{});const o=this.buildFullUrl(this.basePath,"/v2/account/session/refresh",i),a=te("POST",r,n);return e&&(a.headers.Authorization="Basic "+Z(e+":"+t)),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkApple(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/apple",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkCustom(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/custom",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkDevice(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/device",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkEmail(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/email",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkFacebook(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebook",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkFacebookInstantGame(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebookinstantgame",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkGameCenter(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/gamecenter",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkGoogle(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/google",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}unlinkSteam(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/account/unlink/steam",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listCategoryDescs(e,t,s,r,i,n={}){if(null==t)throw new Error("'clanId' is a required parameter but is null or undefined.");const o="/v2/categorydesc/{clanId}".replace("{clanId}",encodeURIComponent(String(t))),a=new Map;a.set("creator_id",s),a.set("category_name",r),a.set("category_id",i);const u=this.buildFullUrl(this.basePath,o,a),h=te("GET",n,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listChannelMessages(e,t,s,r,i,n={}){if(null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");const o="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(t))),a=new Map;a.set("limit",s),a.set("forward",r),a.set("cursor",i);const u=this.buildFullUrl(this.basePath,o,a),h=te("GET",n,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listChannelDescs(e,t,s,r,i,n={}){const o=new Map;o.set("limit",t),o.set("state",s),o.set("cursor",r),o.set("clan_id",i);const a=this.buildFullUrl(this.basePath,"/v2/channeldesc",o),u=te("GET",n,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}createChannelDesc(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/channeldesc",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}postLastSeenMessage(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/channeldesc/last-message-seen",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteChannelDesc(e,t,s={}){if(null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");const r="/v2/channeldesc/{channelId}".replace("{channelId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("DELETE",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}updateChannelDesc(e,t,s,r={}){if(null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");if(null==s)throw new Error("'body' is a required parameter but is null or undefined.");const i="/v2/channeldesc/{channelId}".replace("{channelId}",encodeURIComponent(String(t))),n=new Map;let o="";o=JSON.stringify(s||{});const a=this.buildFullUrl(this.basePath,i,n),u=te("PUT",r,o);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}addChannelUsers(e,t,s,r={}){if(null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");const i="/v2/channeldesc/{channelId}/add".replace("{channelId}",encodeURIComponent(String(t))),n=new Map;n.set("user_ids",s);const o=this.buildFullUrl(this.basePath,i,n),a=te("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}leaveChannel(e,t,s={}){if(null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");const r="/v2/channeldesc/{channelId}/leave".replace("{channelId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("POST",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}removeChannelUsers(e,t,s,r={}){if(null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");const i="/v2/channeldesc/{channelId}/remove".replace("{channelId}",encodeURIComponent(String(t))),n=new Map;n.set("user_ids",s);const o=this.buildFullUrl(this.basePath,i,n),a=te("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listChannelUsers(e,t,s,r,i,n={}){if(null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");const o="/v2/channeldesc/{channelId}/user".replace("{channelId}",encodeURIComponent(String(t))),a=new Map;a.set("limit",s),a.set("state",r),a.set("cursor",i);const u=this.buildFullUrl(this.basePath,o,a),h=te("GET",n,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}channelMessageTyping(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/channelmessagetyping",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listClanDescs(e,t,s,r,i={}){const n=new Map;n.set("limit",t),n.set("state",s),n.set("cursor",r);const o=this.buildFullUrl(this.basePath,"/v2/clandesc",n),a=te("GET",i,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}createClanDesc(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/clandesc",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteClanDesc(e,t,s={}){if(null==t)throw new Error("'clanDescId' is a required parameter but is null or undefined.");const r="/v2/clandesc/{clanDescId}".replace("{clanDescId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("DELETE",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}updateClanDesc(e,t,s,r,i,n,o={}){if(null==t)throw new Error("'clanId' is a required parameter but is null or undefined.");const a="/v2/clandesc/{clanId}".replace("{clanId}",encodeURIComponent(String(t))),u=new Map;u.set("creator_id",s),u.set("clan_name",r),u.set("logo",i),u.set("banner",n);const h=this.buildFullUrl(this.basePath,a,u),l=te("PUT",o,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(h,l).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}getClanDescProfile(e,t,s={}){if(null==t)throw new Error("'clanId' is a required parameter but is null or undefined.");const r="/v2/clandescprofile/{clanId}".replace("{clanId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("GET",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}updateClanDescProfile(e,t,s,r={}){if(null==t)throw new Error("'clanId' is a required parameter but is null or undefined.");if(null==s)throw new Error("'body' is a required parameter but is null or undefined.");const i="/v2/clandescprofile/{clanId}".replace("{clanId}",encodeURIComponent(String(t))),n=new Map;let o="";o=JSON.stringify(s||{});const a=this.buildFullUrl(this.basePath,i,n),u=te("PUT",r,o);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}createCategoryDesc(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/createcategory",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteCategoryDesc(e,t,s={}){if(null==t)throw new Error("'creatorId' is a required parameter but is null or undefined.");const r="/v2/deletecategory/{creatorId}".replace("{creatorId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("DELETE",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}event(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/event",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteFriends(e,t,s,r={}){const i=new Map;i.set("ids",t),i.set("usernames",s);const n=this.buildFullUrl(this.basePath,"/v2/friend",i),o=te("DELETE",r,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listFriends(e,t,s,r,i={}){const n=new Map;n.set("limit",t),n.set("state",s),n.set("cursor",r);const o=this.buildFullUrl(this.basePath,"/v2/friend",n),a=te("GET",i,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}addFriends(e,t,s,r={}){const i=new Map;i.set("ids",t),i.set("usernames",s);const n=this.buildFullUrl(this.basePath,"/v2/friend",i),o=te("POST",r,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}blockFriends(e,t,s,r={}){const i=new Map;i.set("ids",t),i.set("usernames",s);const n=this.buildFullUrl(this.basePath,"/v2/friend/block",i),o=te("POST",r,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}importFacebookFriends(e,t,s,r={}){if(null==t)throw new Error("'account' is a required parameter but is null or undefined.");const i=new Map;i.set("reset",s);let n="";n=JSON.stringify(t||{});const o=this.buildFullUrl(this.basePath,"/v2/friend/facebook",i),a=te("POST",r,n);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}importSteamFriends(e,t,s,r={}){if(null==t)throw new Error("'account' is a required parameter but is null or undefined.");const i=new Map;i.set("reset",s);let n="";n=JSON.stringify(t||{});const o=this.buildFullUrl(this.basePath,"/v2/friend/steam",i),a=te("POST",r,n);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listGroups(e,t,s,r,i,n,o,a={}){const u=new Map;u.set("name",t),u.set("cursor",s),u.set("limit",r),u.set("lang_tag",i),u.set("members",n),u.set("open",o);const h=this.buildFullUrl(this.basePath,"/v2/group",u),l=te("GET",a,"");return e&&(l.headers.Authorization="Bearer "+e),Promise.race([fetch(h,l).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}createGroup(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/group",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteGroup(e,t,s={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("DELETE",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}updateGroup(e,t,s,r={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==s)throw new Error("'body' is a required parameter but is null or undefined.");const i="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(t))),n=new Map;let o="";o=JSON.stringify(s||{});const a=this.buildFullUrl(this.basePath,i,n),u=te("PUT",r,o);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}addGroupUsers(e,t,s,r={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const i="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(t))),n=new Map;n.set("user_ids",s);const o=this.buildFullUrl(this.basePath,i,n),a=te("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}banGroupUsers(e,t,s,r={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const i="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(t))),n=new Map;n.set("user_ids",s);const o=this.buildFullUrl(this.basePath,i,n),a=te("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}demoteGroupUsers(e,t,s,r={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const i="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(t))),n=new Map;n.set("user_ids",s);const o=this.buildFullUrl(this.basePath,i,n),a=te("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}joinGroup(e,t,s={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("POST",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}leaveGroup(e,t,s={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("POST",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}promoteGroupUsers(e,t,s,r={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const i="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(t))),n=new Map;n.set("user_ids",s);const o=this.buildFullUrl(this.basePath,i,n),a=te("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}kickGroupUsers(e,t,s,r={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const i="/v2/group/{groupId}/remove".replace("{groupId}",encodeURIComponent(String(t))),n=new Map;n.set("user_ids",s);const o=this.buildFullUrl(this.basePath,i,n),a=te("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listGroupUsers(e,t,s,r,i,n={}){if(null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");const o="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(t))),a=new Map;a.set("limit",s),a.set("state",r),a.set("cursor",i);const u=this.buildFullUrl(this.basePath,o,a),h=te("GET",n,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}createLinkInviteUser(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/invite",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}getLinkInvite(e,t,s={}){if(null==t)throw new Error("'inviteId' is a required parameter but is null or undefined.");const r="/v2/invite/{inviteId}".replace("{inviteId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("GET",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}inviteUser(e,t,s={}){if(null==t)throw new Error("'inviteId' is a required parameter but is null or undefined.");const r="/v2/invite/{inviteId}".replace("{inviteId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("POST",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteNotifications(e,t,s={}){const r=new Map;r.set("ids",t);const i=this.buildFullUrl(this.basePath,"/v2/notification",r),n=te("DELETE",s,"");return e&&(n.headers.Authorization="Bearer "+e),Promise.race([fetch(i,n).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listNotifications(e,t,s,r={}){const i=new Map;i.set("limit",t),i.set("cacheable_cursor",s);const n=this.buildFullUrl(this.basePath,"/v2/notification",i),o=te("GET",r,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listRoles(e,t,s,r,i,n={}){const o=new Map;o.set("limit",t),o.set("state",s),o.set("cursor",r),o.set("clan_id",i);const a=this.buildFullUrl(this.basePath,"/v2/roles",o),u=te("GET",n,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}createRole(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/roles",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteRole(e,t,s={}){if(null==t)throw new Error("'roleId' is a required parameter but is null or undefined.");const r="/v2/roles/{roleId}".replace("{roleId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("DELETE",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}updateRole(e,t,s,r={}){if(null==t)throw new Error("'roleId' is a required parameter but is null or undefined.");if(null==s)throw new Error("'body' is a required parameter but is null or undefined.");const i="/v2/roles/{roleId}".replace("{roleId}",encodeURIComponent(String(t))),n=new Map;let o="";o=JSON.stringify(s||{});const a=this.buildFullUrl(this.basePath,i,n),u=te("PUT",r,o);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listRolePermissions(e,t,s={}){if(null==t)throw new Error("'roleId' is a required parameter but is null or undefined.");const r="/v2/roles/{roleId}/permissions".replace("{roleId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("GET",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listRoleUsers(e,t,s,r,i={}){if(null==t)throw new Error("'roleId' is a required parameter but is null or undefined.");const n="/v2/roles/{roleId}/users".replace("{roleId}",encodeURIComponent(String(t))),o=new Map;o.set("limit",s),o.set("cursor",r);const a=this.buildFullUrl(this.basePath,n,o),u=te("GET",i,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}rpcFunc2(e,t,s,r,i,n,o={}){if(null==r)throw new Error("'id' is a required parameter but is null or undefined.");const a="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(r))),u=new Map;u.set("payload",i),u.set("http_key",n);const h=this.buildFullUrl(this.basePath,a,u),l=te("GET",o,"");return e&&(l.headers.Authorization="Bearer "+e),t&&(l.headers.Authorization="Basic "+Z(t+":"+s)),Promise.race([fetch(h,l).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}rpcFunc(e,t,s,r,i,n,o={}){if(null==r)throw new Error("'id' is a required parameter but is null or undefined.");if(null==i)throw new Error("'payload' is a required parameter but is null or undefined.");const a="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(r))),u=new Map;u.set("http_key",n);let h="";h=JSON.stringify(i||{});const l=this.buildFullUrl(this.basePath,a,u),d=te("POST",o,h);return e&&(d.headers.Authorization="Bearer "+e),t&&(d.headers.Authorization="Basic "+Z(t+":"+s)),Promise.race([fetch(l,d).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}sessionLogout(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/session/logout",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}readStorageObjects(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/storage",r),o=te("POST",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}writeStorageObjects(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/storage",r),o=te("PUT",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}deleteStorageObjects(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/storage/delete",r),o=te("PUT",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listStorageObjects(e,t,s,r,i,n={}){if(null==t)throw new Error("'collection' is a required parameter but is null or undefined.");const o="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(t))),a=new Map;a.set("user_id",s),a.set("limit",r),a.set("cursor",i);const u=this.buildFullUrl(this.basePath,o,a),h=te("GET",n,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listStorageObjects2(e,t,s,r,i,n={}){if(null==t)throw new Error("'collection' is a required parameter but is null or undefined.");if(null==s)throw new Error("'userId' is a required parameter but is null or undefined.");const o="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(t))).replace("{userId}",encodeURIComponent(String(s))),a=new Map;a.set("limit",r),a.set("cursor",i);const u=this.buildFullUrl(this.basePath,o,a),h=te("GET",n,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}joinTournament(e,t,s={}){if(null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const r="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(t))),i=new Map,n=this.buildFullUrl(this.basePath,r,i),o=te("POST",s,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}updateCategory(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/updatecategory",r),o=te("PUT",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}getUsers(e,t,s,r,i={}){const n=new Map;n.set("ids",t),n.set("usernames",s),n.set("facebook_ids",r);const o=this.buildFullUrl(this.basePath,"/v2/user",n),a=te("GET",i,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}updateUser(e,t,s={}){if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const r=new Map;let i="";i=JSON.stringify(t||{});const n=this.buildFullUrl(this.basePath,"/v2/user/update",r),o=te("PUT",s,i);return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(n,o).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}listUserGroups(e,t,s,r,i,n={}){if(null==t)throw new Error("'userId' is a required parameter but is null or undefined.");const o="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(t))),a=new Map;a.set("limit",s),a.set("state",r),a.set("cursor",i);const u=this.buildFullUrl(this.basePath,o,a),h=te("GET",n,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(u,h).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.timeoutMs,"Request timed out.")))])}buildFullUrl(e,t,s){let r=e+t+"?";for(let[e,t]of s)t instanceof Array?r+=t.reduce(((t,s)=>t+encodeURIComponent(e)+"="+encodeURIComponent(s)+"&"),""):null!=t&&(r+=encodeURIComponent(e)+"="+encodeURIComponent(t)+"&");return r}}(e,o,i)}addGroupUsers(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.addGroupUsers(e.token,t,s).then((e=>void 0!==e))}))}addChannelUsers(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.addChannelUsers(e.token,t,s).then((e=>void 0!==e))}))}addFriends(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.addFriends(e.token,t,s).then((e=>void 0!==e))}))}authenticateApple(e,t,s){return l(this,arguments,(function*(e,t,s,r={},i={}){const n={token:e,vars:r};return this.apiClient.authenticateApple(this.serverkey,"",n,t,s,i).then((e=>new re(e.token||"",e.refresh_token||"",e.created||!1)))}))}authenticateCustom(e,t,s,r={},i={}){const n={id:e,vars:r};return this.apiClient.authenticateCustom(this.serverkey,"",n,t,s,i).then((e=>new re(e.token||"",e.refresh_token||"",e.created||!1)))}authenticateDevice(e,t,s,r){const i={id:e,vars:r};return this.apiClient.authenticateDevice(this.serverkey,"",i,t,s).then((e=>new re(e.token||"",e.refresh_token||"",e.created||!1)))}authenticateEmail(e,t,s,r,i){const n={email:e,password:t,vars:i};return this.apiClient.authenticateEmail(this.serverkey,"",n,s,r).then((e=>new re(e.token||"",e.refresh_token||"",e.created||!1)))}authenticateFacebookInstantGame(e,t,s,r,i={}){const n={signed_player_info:e,vars:r};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:n.signed_player_info,vars:n.vars},t,s,i).then((e=>new re(e.token||"",e.refresh_token||"",e.created||!1)))}authenticateFacebook(e,t,s,r,i,n={}){const o={token:e,vars:i};return this.apiClient.authenticateFacebook(this.serverkey,"",o,t,s,r,n).then((e=>new re(e.token||"",e.refresh_token||"",e.created||!1)))}authenticateGoogle(e,t,s,r){return l(this,arguments,(function*(e,t,s,r,i={}){const n={token:e,vars:r},o=yield this.apiClient.authenticateGoogle(this.serverkey,"",n,t,s,i);return new re(o.token||"",o.refresh_token||"",o.created||!1)}))}authenticateGameCenter(e,t,s,r,i,n,o,a,u){return l(this,arguments,(function*(e,t,s,r,i,n,o,a,u,h={}){const l={bundle_id:e,player_id:t,public_key_url:s,salt:r,signature:i,timestamp_seconds:n,vars:u},d=yield this.apiClient.authenticateGameCenter(this.serverkey,"",l,a,o,h);return new re(d.token||"",d.refresh_token||"",d.created||!1)}))}authenticateSteam(e,t,s,r,i){return l(this,null,(function*(){const n={token:e,vars:i,sync:r};return this.apiClient.authenticateSteam(this.serverkey,"",n,t,s).then((e=>new re(e.token||"",e.refresh_token||"",e.created||!1)))}))}banGroupUsers(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.banGroupUsers(e.token,t,s).then((e=>void 0!==e))}))}blockFriends(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.blockFriends(e.token,t,s).then((e=>Promise.resolve(null!=e)))}))}createGroup(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.createGroup(e.token,t).then((e=>Promise.resolve({avatar_url:e.avatar_url,create_time:e.create_time,creator_id:e.creator_id,description:e.description,edge_count:e.edge_count?Number(e.edge_count):0,id:e.id,lang_tag:e.lang_tag,max_count:e.max_count?Number(e.max_count):0,metadata:e.metadata?JSON.parse(e.metadata):void 0,name:e.name,open:e.open,update_time:e.update_time})))}))}createChannelDesc(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.createChannelDesc(e.token,t).then((e=>Promise.resolve(e)))}))}createClanDesc(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.createClanDesc(e.token,t).then((e=>Promise.resolve(e)))}))}createCategoryDesc(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.createCategoryDesc(e.token,t).then((e=>Promise.resolve(e)))}))}createRole(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.createRole(e.token,t).then((e=>Promise.resolve(e)))}))}createSocket(e=!1,t=!1,s=new ae,r=he.DefaultSendTimeoutMs){return new he(this.host,this.port,e,t,s,r)}deleteFriends(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.deleteFriends(e.token,t,s).then((e=>void 0!==e))}))}deleteGroup(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.deleteGroup(e.token,t).then((e=>void 0!==e))}))}deleteChannelDesc(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.deleteChannelDesc(e.token,t).then((e=>void 0!==e))}))}deleteClanDesc(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.deleteClanDesc(e.token,t).then((e=>void 0!==e))}))}deleteCategoryDesc(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.deleteCategoryDesc(e.token,t).then((e=>void 0!==e))}))}deleteNotifications(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.deleteNotifications(e.token,t).then((e=>Promise.resolve(null!=e)))}))}deleteStorageObjects(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.deleteStorageObjects(e.token,t).then((e=>Promise.resolve(null!=e)))}))}deleteRole(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.deleteRole(e.token,t).then((e=>void 0!==e))}))}demoteGroupUsers(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.demoteGroupUsers(e.token,t,s).then((e=>Promise.resolve(null!=e)))}))}emitEvent(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.event(e.token,t).then((e=>Promise.resolve(null!=e)))}))}getAccount(e){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.getAccount(e.token)}))}importFacebookFriends(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.importFacebookFriends(e.token,t).then((e=>void 0!==e))}))}importSteamFriends(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.importSteamFriends(e.token,t,s).then((e=>void 0!==e))}))}getUsers(e,t,s,r){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.getUsers(e.token,t,s,r).then((e=>{var t={users:[]};return null==e.users||e.users.forEach((e=>{t.users.push({avatar_url:e.avatar_url,create_time:e.create_time,display_name:e.display_name,edge_count:e.edge_count?Number(e.edge_count):0,facebook_id:e.facebook_id,gamecenter_id:e.gamecenter_id,google_id:e.google_id,id:e.id,lang_tag:e.lang_tag,location:e.location,online:e.online,steam_id:e.steam_id,timezone:e.timezone,update_time:e.update_time,username:e.username,metadata:e.metadata?JSON.parse(e.metadata):void 0})})),Promise.resolve(t)}))}))}joinGroup(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.joinGroup(e.token,t,{}).then((e=>void 0!==e))}))}joinTournament(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.joinTournament(e.token,t,{}).then((e=>void 0!==e))}))}kickGroupUsers(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.kickGroupUsers(e.token,t,s).then((e=>Promise.resolve(null!=e)))}))}removeChannelUsers(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.removeChannelUsers(e.token,t,s).then((e=>Promise.resolve(null!=e)))}))}leaveGroup(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.leaveGroup(e.token,t,{}).then((e=>void 0!==e))}))}listChannelMessages(e,t,s,r,i){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listChannelMessages(e.token,t,s,r,i).then((e=>{var t={messages:[],last_seen_message_id:e.last_seen_message_id,next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,cacheable_cursor:e.cacheable_cursor};return null==e.messages||e.messages.forEach((e=>{t.messages.push({channel_id:e.channel_id,code:e.code?Number(e.code):0,create_time:e.create_time,message_id:e.message_id,persistent:e.persistent,sender_id:e.sender_id,update_time:e.update_time,username:e.username,content:e.content?JSON.parse(e.content):void 0,group_id:e.group_id,room_name:e.room_name,user_id_one:e.user_id_one,user_id_two:e.user_id_two})})),Promise.resolve(t)}))}))}listChannelUsers(e,t,s,r,i){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listChannelUsers(e.token,t,r,s,i).then((e=>{var t={channel_users:[],cursor:e.cursor};return null==e.channel_users||e.channel_users.forEach((e=>{t.channel_users.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0},role_id:e.role_id})})),Promise.resolve(t)}))}))}listGroupUsers(e,t,s,r,i){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listGroupUsers(e.token,t,r,s,i).then((e=>{var t={group_users:[],cursor:e.cursor};return null==e.group_users||e.group_users.forEach((e=>{t.group_users.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0},state:e.state?Number(e.state):0})})),Promise.resolve(t)}))}))}listUserGroups(e,t,s,r,i){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listUserGroups(e.token,t,s,r,i).then((e=>{var t={user_groups:[],cursor:e.cursor};return null==e.user_groups||e.user_groups.forEach((e=>{t.user_groups.push({group:{avatar_url:e.group.avatar_url,create_time:e.group.create_time,creator_id:e.group.creator_id,description:e.group.description,edge_count:e.group.edge_count?Number(e.group.edge_count):0,id:e.group.id,lang_tag:e.group.lang_tag,max_count:e.group.max_count,metadata:e.group.metadata?JSON.parse(e.group.metadata):void 0,name:e.group.name,open:e.group.open,update_time:e.group.update_time},state:e.state?Number(e.state):0})})),Promise.resolve(t)}))}))}listGroups(e,t,s,r){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listGroups(e.token,t,s,r).then((e=>{var t={groups:[]};return null==e.groups||(t.cursor=e.cursor,e.groups.forEach((e=>{t.groups.push({avatar_url:e.avatar_url,create_time:e.create_time,creator_id:e.creator_id,description:e.description,edge_count:e.edge_count?Number(e.edge_count):0,id:e.id,lang_tag:e.lang_tag,max_count:e.max_count,metadata:e.metadata?JSON.parse(e.metadata):void 0,name:e.name,open:e.open,update_time:e.update_time})}))),Promise.resolve(t)}))}))}listChannelDescs(e,t,s,r,i){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listChannelDescs(e.token,t,s,r,i).then((e=>{var t={channeldesc:[],next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,cacheable_cursor:e.cacheable_cursor};return null==e.channeldesc||(t.channeldesc=e.channeldesc),Promise.resolve(t)}))}))}listClanDescs(e,t,s,r){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listClanDescs(e.token,t,s,r).then((e=>{var t={clandesc:[]};return null==e.clandesc||(t.clandesc=e.clandesc),Promise.resolve(t)}))}))}listCategoryDescs(e,t,s,r){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listCategoryDescs(e.token,t,s,r).then((e=>{var t={categorydesc:[]};return null==e.categorydesc||(t.categorydesc=e.categorydesc),Promise.resolve(t)}))}))}listRoles(e,t,s,r,i){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listRoles(e.token,t,s,r,i).then((e=>Promise.resolve(e)))}))}listRolePermissions(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listRolePermissions(e.token,t).then((e=>Promise.resolve(e)))}))}listRoleUsers(e,t,s,r){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listRoleUsers(e.token,t,s,r).then((e=>Promise.resolve(e)))}))}getClanDescProfile(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.getClanDescProfile(e.token,t).then((e=>Promise.resolve(e)))}))}linkApple(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkApple(e.token,t).then((e=>void 0!==e))}))}linkCustom(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkCustom(e.token,t).then((e=>void 0!==e))}))}linkDevice(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkDevice(e.token,t).then((e=>void 0!==e))}))}linkEmail(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkEmail(e.token,t).then((e=>void 0!==e))}))}linkFacebook(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkFacebook(e.token,t).then((e=>void 0!==e))}))}linkFacebookInstantGame(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkFacebookInstantGame(e.token,t).then((e=>void 0!==e))}))}linkGoogle(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkGoogle(e.token,t).then((e=>void 0!==e))}))}linkGameCenter(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkGameCenter(e.token,t).then((e=>void 0!==e))}))}linkSteam(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.linkSteam(e.token,t).then((e=>void 0!==e))}))}listFriends(e,t,s,r){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listFriends(e.token,s,t,r).then((e=>{var t={friends:[],cursor:e.cursor};return null==e.friends||e.friends.forEach((e=>{t.friends.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0,facebook_instant_game_id:e.user.facebook_instant_game_id},state:e.state})})),Promise.resolve(t)}))}))}listNotifications(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listNotifications(e.token,t,s).then((e=>{var t={cacheable_cursor:e.cacheable_cursor,notifications:[]};return null==e.notifications||e.notifications.forEach((e=>{t.notifications.push({code:e.code?Number(e.code):0,create_time:e.create_time,id:e.id,persistent:e.persistent,sender_id:e.sender_id,subject:e.subject,content:e.content?JSON.parse(e.content):void 0})})),Promise.resolve(t)}))}))}listStorageObjects(e,t,s,r,i){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.listStorageObjects(e.token,t,s,r,i).then((e=>{var t={objects:[],cursor:e.cursor};return null==e.objects||e.objects.forEach((e=>{t.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read?Number(e.permission_read):0,permission_write:e.permission_write?Number(e.permission_write):0,value:e.value?JSON.parse(e.value):void 0,version:e.version,user_id:e.user_id,create_time:e.create_time,update_time:e.update_time})})),Promise.resolve(t)}))}))}promoteGroupUsers(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.promoteGroupUsers(e.token,t,s)}))}readStorageObjects(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.readStorageObjects(e.token,t).then((e=>{var t={objects:[]};return null==e.objects||e.objects.forEach((e=>{t.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read?Number(e.permission_read):0,permission_write:e.permission_write?Number(e.permission_write):0,value:e.value?JSON.parse(e.value):void 0,version:e.version,user_id:e.user_id,create_time:e.create_time,update_time:e.update_time})})),Promise.resolve(t)}))}))}rpc(e,t,s,r,i){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.rpcFunc(e.token,t,s,r,JSON.stringify(i)).then((e=>Promise.resolve({id:e.id,payload:e.payload?JSON.parse(e.payload):void 0})))}))}rpcHttpKey(e,t,s){return l(this,null,(function*(){return this.apiClient.rpcFunc2("",t,s&&JSON.stringify(s)||"",e).then((e=>Promise.resolve({id:e.id,payload:e.payload?JSON.parse(e.payload):void 0}))).catch((e=>{throw e}))}))}sessionLogout(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.sessionLogout(e.token,{refresh_token:s,token:t}).then((e=>void 0!==e))}))}sessionRefresh(e){return l(this,arguments,(function*(e,t={}){if(!e)return console.error("Cannot refresh a null session."),e;e.created&&e.expires_at-e.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),e.created&&e.refresh_expires_at-e.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session");const s=yield this.apiClient.sessionRefresh(this.serverkey,"",{token:e.refresh_token,vars:t});return e.update(s.token,s.refresh_token),e}))}unlinkApple(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkApple(e.token,t).then((e=>void 0!==e))}))}unlinkCustom(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkCustom(e.token,t).then((e=>void 0!==e))}))}unlinkDevice(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkDevice(e.token,t).then((e=>void 0!==e))}))}unlinkEmail(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkEmail(e.token,t).then((e=>void 0!==e))}))}unlinkFacebook(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkFacebook(e.token,t).then((e=>void 0!==e))}))}unlinkFacebookInstantGame(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkFacebookInstantGame(e.token,t).then((e=>void 0!==e))}))}unlinkGoogle(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkGoogle(e.token,t).then((e=>void 0!==e))}))}unlinkGameCenter(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkGameCenter(e.token,t).then((e=>void 0!==e))}))}unlinkSteam(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.unlinkSteam(e.token,t).then((e=>void 0!==e))}))}updateAccount(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.updateAccount(e.token,t).then((e=>void 0!==e))}))}updateGroup(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.updateGroup(e.token,t,s).then((e=>void 0!==e))}))}updateChannelDesc(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.updateChannelDesc(e.token,t,s).then((e=>void 0!==e))}))}updateClanDesc(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.updateClanDesc(e.token,t,null==s?void 0:s.creator_id,null==s?void 0:s.clan_name,null==s?void 0:s.logo,null==s?void 0:s.banner).then((e=>void 0!==e))}))}updateCategory(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.updateCategory(e.token,t).then((e=>void 0!==e))}))}updateClanDescProfile(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.updateClanDescProfile(e.token,t,s).then((e=>void 0!==e))}))}updateRole(e,t,s){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.updateRole(e.token,t,s).then((e=>void 0!==e))}))}createLinkInviteUser(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.createLinkInviteUser(e.token,t).then((e=>Promise.resolve(e)))}))}getLinkInvite(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.getLinkInvite(e.token,t).then((e=>Promise.resolve(e)))}))}inviteUser(e,t){return l(this,null,(function*(){return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e)),this.apiClient.inviteUser(e.token,t).then((e=>Promise.resolve(e)))}))}writeStorageObjects(e,t){return l(this,null,(function*(){this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)&&(yield this.sessionRefresh(e));var s={objects:[]};return t.forEach((e=>{s.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read,permission_write:e.permission_write,value:JSON.stringify(e.value),version:e.version})})),this.apiClient.writeStorageObjects(e.token,s)}))}}}},r={};e=function e(t){var i=r[t];if(void 0!==i)return i.exports;var n=r[t]={exports:{}};return s[t](n,n.exports,e),n.exports}(232),(t=new e.Client("defaultkey","127.0.0.1","7350",!1)).authenticateEmail("user1@ncc.asia","Aa12345678").then((function(e){console.log("authenticated.");var s=t.createSocket(!1,!1);s.connect(e,!0).then((function(e){s.joinChat("c35f5457-5ad5-46a4-a6c1-d1b97eb14d85","Room1",1,!0,!1).then((function(e){console.log("You can now send message to channel id ",e),s.writeChatMessage("093b8667-1ce3-4982-9140-790dfebcf3c9","c35f5457-5ad5-46a4-a6c1-d1b97eb14d85",{data:"Hello!"}).then((function(e){console.log("send message",e)})),s.writeMessageTyping("c35f5457-5ad5-46a4-a6c1-d1b97eb14d85").then((function(e){return console.log(e)}))}))}))})).catch((function(e){console.log("error authenticating.")}))})();